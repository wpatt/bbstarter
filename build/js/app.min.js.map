{"version":3,"file":"app.js","sources":["../app/js/app.js","../app/js/models/node.model.js","../app/js/collections/node.collection.js","../app/js/views/app.view.js"],"names":["window","bbs","vent","_","extend","Backbone","Events","CSRF_TOKEN","$","attr","oldSync","sync","method","model","options","oldBeforeSend","beforeSend","noop","xhr","setRequestHeader","type","Node","Model","urlRoot","NodeCollection","Collection","url","parse","response","list","appView","View","el","document","getElementById","template","html","initialize","this","listenTo","collection","renderAll","fetch","reset","ul","each","node","append","attributes","$el"],"mappings":"aAAA,AAIAA,EAJE,CAAC,GAAG,CAAC,AAIAC,EAJE,EAIID,OAAOC,QAGpBA,IAAIC,KAAOC,EAAEC,UAAWC,SAASC,OAyBjC,IAEIC,GAAaC,EAAA,2BAA6BC,KAAI,YAAe,KAG7DC,EAAUL,SAASM,IACvBN,UAASM,KAAO,SAASC,EAAQC,EAAOC,GACtC,GAAIA,GAAUA,MACVC,EAAgBD,EAAQE,YAAcR,EAAES,IAU5C,OARAH,GAAQE,WAAa,SAASE,GAC5BA,EAAIC,iBAAgB,eAAiBZ,GACrCQ,EAAcG,IAID,UAAXN,IAAoBE,EAAQM,KAAO,OAEhCV,EAAQE,EAAQC,EAAOC,IC9ChCb,IAAIoB,KAAOhB,SAASiB,MAAMlB,QACxBmB,QAAS,UCDXtB,IAAIuB,eAAiBnB,SAASoB,WAAWrB,QACvCS,MAAOZ,IAAIoB,KAEXK,IAAK,aAELC,MAAO,SAAUC,GACf,MAAOA,GAASC,QCNpB5B,IAAI6B,QAAUzB,SAAS0B,KAAK3B,QAC1B4B,GAAIC,SAASC,eAAc,aAC3BC,SAAUhC,EAAEgC,SAAU3B,EAAA,aAAe4B,QAErCC,WAAY,SAASvB,GAEnBwB,KAAKC,SAASD,KAAKE,WAAY,QAASF,KAAKG,WAI7CH,KAAKE,WAAWE,OACdC,OAAO,EACPH,WAAYF,KAAKE,cAKrBC,UAAW,WACT,GAAIG,GAAKpC,EAAA,YACT8B,MAAKE,WAAWK,KAAK,SAASC,GAC5BF,EAAGG,OAAQT,KAAKH,SAASW,EAAKE,cAC7BV,MACHA,KAAIW,IAAKb,KAAMQ;AHzBnB,EAAE;AACF,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,UAAU;AAC/C;AACA,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG;AAC9B;AACA,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC;AAChH,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;AACzC;AACA,EAAE,CAAC,EAAE,CAAC,KAAK;AACX;AACA,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;AAC9C,EAAE,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,KAAK;AAC/B,EAAE;AACF;AACA,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,CAAC,WAAW,EAAE;AACpD,EAAE,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,KAAK;AAC/B,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;AAC9C,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACrE,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE;AAClD,EAAE,CAAC;AACH,EAAE,IAAI,CAAC,CAAC;AACR,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,EAAE;AACpC,EAAE,CAAC;AACH,EAAE;AACF;AACA,EAAE,aAAa,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7D,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;AACtC,GAAG;AACH;AACA,EAAE,CAAC,EAAE;AACL;AACA,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;AACnB,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB,IAAI,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC;AACtE;AACA,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK;AACtD,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC;AAC5B,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE;AACjD,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG;AAC9B,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;AACnD;AACA,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE;AACrC,IAAI,GAAG,CAAC,gBAAgB,EAAE,YAAY,EAAE,CAAC,UAAU,EAAE;AACrD,IAAI,aAAa,CAAC,GAAG,EAAE;AACvB,EAAE,EAAE;AACJ;AACA,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK;AACjC,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;AAC/C;AACA,EAAE,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE;AACzC,EAAE;;ACnDF;AACA,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI;AACxB,EAAE,CAAC,qBAAqB;AACxB;AACA,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE;AAClC,EAAE,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC;AAClB,GAAG;;ACNH;AACA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,KAAK;AACtB,EAAE,CAAC,mBAAmB;AACtB;AACA,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,EAAE;AACjD,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;AAClB;AACA,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE;AACpB;AACA,EAAE,KAAK,CAAC,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC9B,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AACzB,EAAE,CAAC;AACH;AACA,G;ACbA;AACA,EAAE,CAAC,GAAG,CAAC,IAAI;AACX,EAAE,CAAC,QAAQ;AACX;AACA,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE;AACpC,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,cAAc,EAAE,SAAS,GAAG;AAC3C,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,QAAQ,GAAG,IAAI,EAAE,CAAC,EAAE;AAChD;AACA,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;AACjC;AACA,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE;AAC5D;AACA,IAAI,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;AAC5E,IAAI,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;AAC7D,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE;AAC3B,MAAM,KAAK,CAAC,CAAC,IAAI,CAAC;AAClB,MAAM,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU;AACjC,IAAI,GAAG;AACP;AACA,EAAE,EAAE;AACJ;AACA,EAAE,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;AACzB,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI;AAC5B,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;AACzC,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE;AAClD,IAAI,EAAE,CAAC,IAAI,EAAE;AACb,IAAI,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE;AACxB,EAAE,CAAC;AACH;AACA,G","sourcesContent":["// app.js\n//\n// Namespace definition and \"global\" properties\n\nwindow.bbs = window.bbs || {};\n\n// @see https://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/\nbbs.vent = _.extend({}, Backbone.Events);\n\n/* // DEBUG\n\nbbs.done = function(data, textStatus, jqXHR) {\n  console.log('jqXHR::done()');\n};\n\nbbs.fail = function(jqXHR, textStatus, errorThrown){\n  console.log('jqXHR::fail()');\n  console.log(textStatus + ' ' + errorThrown);\n  if (jqXHR.responseText[0] == '[' || jqXHR.responseText[0] == '{') {\n    console.log( JSON.parse(jqXHR.responseText) );\n  }\n  else {\n    console.log(jqXHR.responseText);\n  }\n};\n\n$.ajaxPrefilter(function( options, originalOptions, jqXHR ) {\n  jqXHR.done(bbs.done).fail(bbs.fail);\n});\n\n// */\n\nvar ENTER_KEY = 13,\n    TAB_KEY = 9,\n    CSRF_TOKEN = $('meta[name=x-csrf-token]').attr('content') || null;\n\n// make sure that backbone submits with our CSRF token\nvar oldSync = Backbone.sync;\nBackbone.sync = function(method, model, options){\n  var options = options || {};\n  var oldBeforeSend = options.beforeSend || $.noop;\n\n  options.beforeSend = function(xhr){\n    xhr.setRequestHeader('X_CSRF_TOKEN', CSRF_TOKEN);\n    oldBeforeSend(xhr);\n  };\n\n  // restws doesn't support PATCH\n  if (method === 'patch') options.type = 'PUT';\n\n  return oldSync(method, model, options);\n};\n","\n// Data model for a node\n// ---------------------\n\nbbs.Node = Backbone.Model.extend({\n  urlRoot: '/node'\n});\n","\n// Collection of nodes\n// -------------------\n\nbbs.NodeCollection = Backbone.Collection.extend({\n  model: bbs.Node,\n\n  url: '/node.json',\n\n  parse: function (response) {\n    return response.list;\n  }\n\n});","\n// App View\n// --------\n\nbbs.appView = Backbone.View.extend({\n  el: document.getElementById('bbstarter'),\n  template: _.template( $('#nodeView').html() ),\n\n  initialize: function(options) {\n\n    this.listenTo(this.collection, 'reset', this.renderAll);\n\n    // Kick-off the rendering process by fetching the nodes from the server.\n    // Functions listening to the \"reset\" event will respond.\n    this.collection.fetch({\n      reset: true,\n      collection: this.collection\n    });\n\n  },\n\n  renderAll: function() {\n    var ul = $('<ul></ul>');\n    this.collection.each(function(node) {\n      ul.append( this.template(node.attributes) );\n    }, this);\n    this.$el.html( ul );\n  }\n\n});"]}